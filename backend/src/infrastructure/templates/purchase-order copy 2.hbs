<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Purchase Order #{{poNumber}}</title>
    <style>
        @page {
            size: A4;
            margin: 12mm;
        }

        body {
            font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
            margin: 0;
            padding: 0;
            font-size: 10pt;
            line-height: 1.2;
        }

        .page-container {
            border: 1px solid #000;
            border-radius: 2mm;
            padding: 6mm;
            min-height: 267mm;
            position: relative;
            box-sizing: border-box;
        }

        /* Header: Process | Title | Section */
        .header-section {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 2mm;
            margin-bottom: 2mm;
            border-bottom: 1px solid #000;
            padding-bottom: 2mm;
            align-items: center;
        }

        .process-info,
        .section-info {
            font-size: 8pt;
            border: 1px solid #000;
            padding: 1.5mm;
            height: fit-content;
        }

        .title {
            text-align: center;
            font-size: 14pt;
            font-weight: bold;
        }

        .section-info {
            text-align: right;
        }
        
        /* Details Grid: To | Bill To | PO Info */
        .details-grid {
            display: grid;
            grid-template-columns: 1.2fr 1fr 1fr;
            gap: 2mm;
            margin-bottom: 2mm;
        }

        .box {
            border: 1px solid #000;
            padding: 1.5mm;
        }

        .details-box {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            font-size: 9pt;
            padding: 1.5mm;
        }

        .details-box > div {
            margin-bottom: 0.8mm;
        }

        .details-box .label {
            font-weight: bold;
            display: inline-block;
            width: 100px; /* Aligns values */
        }
        
        .railway-details {
            font-size: 8pt;
            word-break: break-all;
        }

        /* Scope of Work Box */
        .scope-box {
             border: 1px solid #000;
             padding: 1.5mm;
             margin: 2mm 0;
             font-weight: bold;
             font-size: 11pt;
        }

        /* Items Table */
        .table-container {
            margin: 2mm 0;
        }

        .items-table {
            width: 100%;
            border-collapse: collapse;
            page-break-inside: auto;
        }

        .items-table tr {
            page-break-inside: avoid;
            page-break-after: auto;
        }

        .items-table th,
        .items-table td {
            border: 1px solid #000;
            padding: 1.2mm;
            text-align: left;
            font-size: 9pt;
            vertical-align: top;
        }

        .items-table th {
            background-color: #f5f5f5;
            font-weight: bold;
        }
        
        .items-table th:nth-child(1) { width: 5%; }
        .items-table th:nth-child(2) { width: 40%; }
        .items-table th:nth-child(3) { width: 10%; }
        .items-table th:nth-child(4) { width: 10%; }
        .items-table th:nth-child(5) { width: 8%; }
        .items-table th:nth-child(6) { width: 15%; }

        .items-table tfoot td {
            font-weight: bold;
            background-color: #f5f5ff;
        }

        .right-align {
            text-align: right;
            white-space: nowrap;
        }

        .center-align {
            text-align: center;
        }

        .bold {
            font-weight: bold;
        }

        .item-description {
            font-size: 8pt;
            color: #444;
            margin-top: 0.8mm;
        }

        /* Terms Section */
        .terms-section {
            border: 1px solid #000;
            padding: 1.5mm;
            margin-bottom: 2mm;
        }

        .terms-section ol {
            padding-left: 15px;
            margin: 1mm 0 0 5px;
            font-size: 9pt;
        }
        
        .terms-section li {
            margin-bottom: 0.5mm;
        }

        /* Footer Section */
        .footer-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2mm;
            page-break-inside: avoid;
        }

        .signature-box {
            min-height: 25mm;
            position: relative;
        }
        
        .signature-box .auth-sig {
            position: absolute;
            bottom: 1.5mm;
        }

        .ship-to-box {
            min-height: 18mm;
        }

        /* Notes Section */
        .notes-box {
            border: 1px solid #000;
            padding: 1.5mm;
            margin-top: 2mm;
        }
        
        .notes-box ol {
            padding-left: 15px;
            margin: 1mm 0 0 5px;
            font-size: 9pt;
        }
    </style>
</head>

<body>
    <div class="page-container">
        <div class="header-section">
            <div class="process-info">
                Process Manual<br>
                Process Code: PUR
            </div>
            <div class="title">PURCHASE ORDER</div>
            <div class="section-info">
                Section No. : 00<br>
                Revision No. : 00
            </div>
        </div>

        <div class="details-grid">
            <div class="box">
                <div class="bold">To,</div>
                M/s. {{vendor.name}}<br>
                {{#if vendor.address}}
                <div style="white-space: pre-line; margin-top: 1mm;">{{vendor.address}}</div>
                {{/if}}
            </div>
            <div class="box">
                <div class="bold">Bill To,</div>
                M/s. Emprise Univora<br>
                B-1/31 Sector-H, Aliganj,<br>
                Lucknow, UP - 226024
            </div>
            <div class="details-box">
                <div><span class="label">P.O. No.</span>: <span class="bold">{{poNumber}}</span></div>
                <div><span class="label">P.O. DATE</span>: {{formatDate createdAt}}</div>
                <div><span class="label">AMENDMENT NO.</span>: NA</div>
                <div><span class="label">AMENDMENT DT.</span>: NA</div>
            </div>
            <div class="box">
                {{#if vendor.gstin}}<div><span class="bold">GSTIN:</span> {{vendor.gstin}}</div>{{/if}}
            </div>
            <div class="box">
                <span class="bold">GSTIN:</span> 09AAAFE7632G1ZI
            </div>
            <div class="details-box railway-details">
                <div><span class="label">Railway Order No.</span>: RCNK/JHS-MECHANICAL / JHS-RCNK-MPAINT-25-26-20 / 00015510140963</div>
                <div><span class="label">Railway Order Date</span>: 7-Oct-25</div>
            </div>
        </div>

        <div class="scope-box">
             {{requirementDesc}}
        </div>

        <div class="table-container">
            <table class="items-table">
                <thead>
                    <tr>
                        <th class="center-align">Sr.No.</th>
                        <th>Particulars</th>
                        <th class="right-align">Unit Rate</th>
                        <th class="right-align">Qty</th>
                        <th class="center-align">UOM</th>
                        <th class="right-align">Value</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each items}}
                    <tr>
                        <td class="center-align">{{add @index 1}}</td>
                        <td>
                            <span class="bold">{{item.name}}</span>
                            {{#if item.description}}
                            <div class="item-description">{{item.description}}</div>
                            {{/if}}
                        </td>
                        <td class="right-align">₹{{formatNumber unitPrice}}</td>
                        <td class="right-align">{{formatNumber quantity}}</td>
                        <td class="center-align">{{item.uom}}</td>
                        <td class="right-align">₹{{formatNumber totalAmount}}</td>
                    </tr>
                    {{/each}}
                    {{#if additionalCharges}}
                    {{#each additionalCharges}}
                    <tr>
                        <td class="center-align">{{add ../items.length (add @index 1)}}</td>
                        <td>{{description}}</td>
                        <td class="right-align">-</td>
                        <td class="right-align">-</td>
                        <td class="center-align">-</td>
                        <td class="right-align">₹{{formatNumber amount}}</td>
                    </tr>
                    {{/each}}
                    {{/if}}
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="5" class="right-align bold">Total (Basic Price)</td>
                        <td class="right-align bold">₹{{formatCurrency baseAmount}}</td>
                    </tr>
                    <tr>
                        <td colspan="5" class="right-align bold">Grand Total (Inclusive of GST@18%)</td>
                        <td class="right-align bold">₹{{formatCurrency totalAmount}}</td>
                    </tr>
                </tfoot>
            </table>
        </div>


        <div class="terms-section">
            <div class="bold">Terms and Conditions:</div>
            <ol>
                <li>Material should be compliant with respective specification mentioned above</li>
                <li><span class="bold">Transportation:</span> Included in the rates above</li>
                <li><span class="bold">Inspection:</span> By TPI</li>
                <li>Internal Works Test Certificate (WTC) and Guarantee Certificate (GC) is a must. Provide all documents as per specifications.</li>
                <li><span class="bold">Payment</span> as per existing terms</li>
                <li><span class="bold">Packing:</span> As per Railway Standard Packing</li>
                <li><span class="bold">Delivery Deadline:</span> Required to be send in equal lots every 6 months with 1st lot to be delivered in December 2025</li>
                <li><span class="bold">Shelf Life:</span> To be minimum 12 months at the time of dispatch</li>
                <li><span class="bold">Warranty:</span> As per Railway's PO conditions</li>
                <li>Rate will remain same during the entire period of the Order.</li>
            </ol>
        </div>

        <div class="footer-section">
            <div>
                 <div class="box" style="margin-bottom: 2mm;">
                    <span class="bold">Our GST no.</span> 09AAAFE7632G1ZI
                </div>
                <div class="box ship-to-box">
                    <div class="bold">Ship To</div>
                    <div style="white-space: pre-line; margin-top: 1mm;">{{shipToAddress}}</div>
                </div>
            </div>
            
            <div class="box signature-box">
                <div class="bold">FOR EMPRISE UNIVORA</div>
                
                <div style="height: 18mm;">
                    </div> 

                <div class="auth-sig">
                    {{createdBy.name}}<br>
                    Authorised Signatory
                </div>
            </div>
        </div>

        <div class="notes-box">
            <div class="bold">Notes</div>
            <ol>
                <li>Please send shipment with OEM WTC and GC.</li>
                <li>Invoices should be raised at Lucknow Address only.</li>
                <li>GST No. should be mentioned on each invoice.</li>
                 {{#if notes}}
                <li>{{notes}}</li>
                {{/if}}
            </ol>
        </div>
    </div>
</body>
</html>